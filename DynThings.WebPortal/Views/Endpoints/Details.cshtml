@model DynThings.Data.Models.Endpoint
@{
    ViewBag.Title = "EndPoint Details";
}

<div class="container">
    <div class="page-header">
        <h1>EndPoint Details</h1>
    </div>
    <div class="row">
        <div class="col-lg-12">
            <select id="drpEndpointHighchartsView" class="form-control">
                <option value="1">Inputs: Monthly\Year (Average)</option>
                <option value="2">Inputs: Daily\Month (Average)</option>
                <option value="3">Inputs: Hourly\Day (Average)</option>
                <option value="4">Inputs: Minutes\Hour (Average)</option>
                <option value="5">Network: Connection drops\Months  (Count)</option>
            </select>
            <div id="HCEndPoint" style="min-width: 310px; height: 400px; margin: 0 auto"></div>
        </div>
    </div>
    <div class="row">
        <div class="col-md-6">
            <ul class="nav nav-tabs">
                <li class="active"><a data-toggle="tab" href="#tabEndPointmain">Main</a></li>
                <li><a data-toggle="tab" href="#tabEndPointhistory">History</a></li>
                <li><a data-toggle="tab" href="#tabEndPointcommands">Commands</a></li>
                <li><a data-toggle="tab" href="#tabEndPointDevkeys">Dev Keys</a></li>
                <li><a data-toggle="tab" href="#tabEndPointDelete">Delete</a></li>
            </ul>
            <div class="panel panel-default">
                <div class="panel-body">
                    <div class="tab-content">
                        <div id="tabEndPointmain" class="tab-pane fade in active">
                            <div id="divEndPointMain">
                            </div>
                        </div>
                        <div id="tabEndPointhistory" class="tab-pane fade">
                            <div id="divEndPointHistory">
                            </div>
                        </div>
                        <div id="tabEndPointcommands" class="tab-pane fade">
                            <div id="divEndPointCommandsList">
                            </div>
                        </div>
                        <div id="tabEndPointDevkeys" class="tab-pane fade">
                            <div id="divEndPointDevkeys">
                            </div>
                        </div>
                        <div id="tabEndPointDelete" class="tab-pane fade">
                            <div id="divEndPointDelete">
                                <button type="button" class="btn btn-danger" onclick="LoadPart_DialogEndPointDelete(@Model.ID)" data-toggle="modal" data-target="#mdl">Delete</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Button trigger modal -->




@section scripts{
<script src="~/Assets/Scripts/DynScripts/EndPoints.js"></script>
<script src="~/Assets/Scripts/DynScripts/EndPointCommands.js"></script>

    <script>
        $(document).ready(function () {
            LoadPart_EndPointDetailsDiv('@Model.ID');
            LoadPart_EndPointHistoryDiv('@Model.ID');
            LoadPart_EndPointCommandListByEndPointIDDiv('@Model.ID','');
        });
    </script>

    <script>
        $(document).ready(function () {
            $(document).on("click", "#EndPointIOsListPager a[href]", function () {
                var loadingpart = LoadDivLoading();
                $("#divEndPointHistory").html(loadingpart);
                $.ajax({
                    url: $(this).attr("href") + '&endpointid=@Model.ID&recordsperpage=0',
                    type: 'GET',
                    cache: false,
                    success: function (result) {
                        $("#divEndPointHistory").html(result);
                        return false;
                    }
                });
                return false;
            });
        });

    </script>
    <script>
        $(function () {
            $('#HCEndPoint').highcharts({
                title: {
                    text: 'Monthly Average',
                    x: -20 //center
                },
                credits:false,
                subtitle: {
                    text: 'text here',
                    x: -20
                },
                xAxis: {
                    categories: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun',
                        'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec']
                },
                yAxis: {
                    title: {
                        text: 'Temperature (°C)'
                    },
                    plotLines: [{
                        value: 0,
                        width: 1,
                        color: '#808080'
                    }]
                },
                tooltip: {
                    valueSuffix: '°C'
                },
                legend: {
                    layout: 'vertical',
                    align: 'right',
                    verticalAlign: 'middle',
                    borderWidth: 0
                },
                series: [{
                    name: 'Tokyo',
                    data: [7.0, 6.9, 9.5, 14.5, 18.2, 21.5, 25.2, 26.5, 23.3, 18.3, 13.9, 9.6]
                }, {
                    name: 'New York',
                    data: [-0.2, 0.8, 5.7, 11.3, 17.0, 22.0, 24.8, 24.1, 20.1, 14.1, 8.6, 2.5]
                }, {
                    name: 'Berlin',
                    data: [-0.9, 0.6, 3.5, 8.4, 13.5, 17.0, 18.6, 17.9, 14.3, 9.0, 3.9, 1.0]
                }, {
                    name: 'London',
                    data: [3.9, 4.2, 5.7, 8.5, 11.9, 15.2, 17.0, 16.6, 14.2, 10.3, 6.6, 4.8]
                }]
            });
        });
    </script>
}
